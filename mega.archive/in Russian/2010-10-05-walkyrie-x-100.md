---
layout: default
categories: [mega, ru]
lang: ru
title: Walkyrie × 100 — интерактивный каталог в мобильном устройстве
slug: walkyrie-x-100
mainpicture: main.jpg
tags: apple baka-baka design emo friends fun gui information iphone numbers reading stuff twitter 
postid: 2391
---


Недавно мы с дружественным <a href="http://kovenkin.com/">минским фотографом</a> гламура, путешествий и антиквариата <a href="/mega/ru/walkyrie-walking-mythology/">запустили проект</a> под названием <a href="http://walkyrie.org/"><em>Walkyrie</em></a>. Шло время, и количество гельветизированных фотографий достигло сотни. Это не просто достижение или причина открыть шампанское, но и что-то вроде дня рождения.<!--more-->

Поскольку мы планируем опубликовать печатный каталог «валькирий» в ближайшем будущем, но не сегодня, мы решили сделать что-то особенное, чтобы отметить эту сотню. Тут-то и появилось то, чего раньше нам встречать не приходилось, — электронная книга, набитая художественным материалом, как любой печатный каталог искусства или дизайна. В качестве формата электронной книги был выбран ePub. Его можно читать как на мобильных устройствах, так и на компьютерах. Получилось две версии художественного альбома (примерно по 15 мегабайтов каждая): <a href="http://walkyrie.org/walkyrie100.epub">Walkyrie × 100</a>, которая должна работать с любой программой для чтениия электроных книг, и специальная версия для iBooks <a href="http://walkyrie.org/iwalkyrie100.epub">Walkyrie × 100 Interactive</a>. Ссылки на обе из них также есть на <a href="http://walkyrie.org/">walkyrie.org</a>.


## Зачем интерактивность

Идея создания интерактивного ePub, который можно было бы просматривать стандартными программами на ай-устройствах, посетила меня давно, но я не уделил ей должного внимания. Однажды ameagari поинтересовался в <a href="http://twitter.com/ameagari">своем твитере</a>, не встречал ли кто такого чуда. Я не встречал и, мало того, не нашел во всем интернете настоящей интерактивности. В который раз пришлось все делать самому ;)


## Это было непросто

У моего друга есть привезенная из Нью-Йорка футболка, на которой написано «fuck rude people, fuck subways, fuck rain, fuck high prices…» и т. д. После создания интерактивной электронной книги я могу сделать такую же футболку, но вместе со словом <em>fuck</em> там будут еще <em>webkit</em>, <em>z-index</em>, <em>font-family</em>, <em>jquery</em>, <em>iBooks</em>. Ниже я расскажу почему.

Необычное для книг взаимодействие пользователя с каталогом «валькирий» осуществляется двумя путями. Во-первых, можно нажать на кружок (в формате SVG, чтобы красиво смотреться на любой странице) в начале книги и попасть на произвольную страницу с картинкой. Наша версия fortune cookie ;)



{% figure /o_O/walkyrie-x-100/fortune.jpg %}



Кроме этого, если читатель не сможет разобрать текст на картинке, к его услугам ссылка <em>Transcript</em>, прикосновение к которой покажет текст крупнее.



{% figure /o_O/walkyrie-x-100/pages.jpg %}



Ничего супер-удивительного, но большего нам и не требовалось. Во всяком случае, до следующей версии.

Интерактивность не поддерживается большинством программ для чтения электронных книг, как мобильных, так и компьютерных, кроме iBooks, но и там все не очень хорошо. У создателя книги нет почти никакого контроля над начертанием и размером шрифтов, над выравниванием текста. Невозможно задать наложение элементов с использованием z-index'а и позиционирования без каких-то прыжков через голову. Невозможно задать расположение элементов на странице (мне пришлось пользоваться таблицами как в 2002-м). Невозможно удостовериться, что объекты будут на одной странице и не расползутся непонятно куда. Например, мы заметили, что если листать страницы вперед, потом назад, а потом опять вперед, то может появиться пустая страница. Тут не мешало бы вспомнить футболку, о которой я рассказывал чуть выше:



{% figure /o_O/walkyrie-x-100/fuck.jpg %}




## Уловки и советы

Я думаю, что некоторым из моих любимых читателей и той замечательной девушке из Кореи, которая нашла эту страницу при помощи гугла, следующая информация покажется увлекательнее всего остального. Для тех, кому неинтересна техническая составляющая процесса, есть следующий раздел повествования, можно перепрыгнуть сразу на него.

Любой файл ePub представляет собой засунутую в архив мешанину из всяких служебных файлов, а также, что важно для нас, содержания книги, представленного .xhtml'ами с CSS и JavaScript'ом, а также всем тем, что необходимо для книги (например, картинками). Я создавал ePub'ы при помощи <a href="http://code.google.com/p/sigil/">Sigil</a>. Эта программа была выбрана неслучайно. Во-первых, у нее правильное концептуально и магически название. Во-вторых, она, в отличие от многих других, работает и существует под Mac OS X. Ну и еще она opensource, если кому-то это важно. Сокращенная версия структуры книги в неудобном как для просмотра, так и для редактирования (привет, opensource) древовидном состоянии представлена ниже.



{% figure /o_O/walkyrie-x-100/structure.png %}



Для того, чтобы работать с объектами на странице, я пользовался jQuery. На прикосновения он реагирует так:
<ol class="h4x0r">
	<li><code>$('#transcript').bind('touchstart', function(e){</code></li>
	<li><code>…</code></li>
	<li><code>});</code></li>
</ol>
Для того, чтобы, не смотря ни на что, выводить подсказки поверх фотографий, я воспользовался следующим кодом:
<ol class="h4x0r">
	<li><code>var tra=$('.help').height()+30;</code></li>
	<li><code>$('.help').css('-webkit-transform','translateY(-'+tra+'px)');</code></li>
</ol>
Как встраивать SVG, думаю, все знают, так что там ничего особенного, только куча этих Midxmidymaxymidy ;)


## Читать нельзя потрогать

Все программы для чтения на тач-устройствах не очень-то жалуют интерактивность в книгах. Проблема заключается в том, что в первую очередь  у программ есть свои интерфейсы, которые тоже управляются прикосновениями. Таким образом, если на какой-то из страниц есть интерактивная область, читатель может нажать на нее как для того, чтобы воспользоваться дополнительным функционалом, так и для того, чтобы воспользоваться интерфейсом приложения. Например, в нашей интерактивном электронном каталоге «валькирий» я был вынужден убрать подсказку по прикосновению к фотографии и создать для этого отдельную ссылку. Дело в том, что при нажатии на правую или левую часть экрана читатель ожидает перелистывания, а не подсказки. Картинка же занимает всю страницу, как и положено в арт-объектах ;)

Помимо конфликта интерфейсов книги и программы, невозможно почти ничего контролировать в расположении и взаимодействии элементов, так что создание удобного интерфейса книги превращается в подвиг. В iBooks также не существует навигации вперед/назад по последним посещенным страницам. Это приводит к тому, что, нажав на сноску, читатель не может вернуться к последней прочитанной странице без хитрых манипуляций.


## Так или иначе

Скачивайте наши «<a href="http://walkyrie.org/">валькирии</a>» на свое мобильное устройство в удобном виде и таскайте с собой всюду. При помощи одной электронной книги вы сможете удивить друзей и коллег, а также иметь уникальный объект для занимания глаз во время поедания пиццы!



{% figure /o_O/walkyrie-x-100/photo.jpg~Как и положено арт-объекту, каталог «валькирий» выделяется на любой книжной полке. Даже виртуальной! %}





## ✖✖✖

Это уже второй проект, связанный с электронными книгами за последние полторы недели. Занял он у меня не намного больше времени, чем <a href="/mega/33-hrs-project/">предыдущий</a>. Мне кажется, грядет что-то интересное ;)